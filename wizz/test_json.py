import requests
import json
from datetime import datetime, date
# json = {}
# dict = {"outboundFlights":[{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-11-20T00:00:00","price":{"amount":2619.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-20T07:10:00"],"classOfService":"J","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-11-22T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-22T07:10:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-11-24T00:00:00","price":{"amount":1599.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-24T07:10:00"],"classOfService":"LB","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-11-25T00:00:00","price":{"amount":1449.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-25T07:10:00"],"classOfService":"B","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-11-26T00:00:00","price":{"amount":1449.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-26T07:10:00"],"classOfService":"B","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-11-27T00:00:00","price":{"amount":2319.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-27T07:10:00"],"classOfService":"JK","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-11-29T00:00:00","price":{"amount":2909.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-29T07:10:00"],"classOfService":"IJ","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-12-01T00:00:00","price":{"amount":1749.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-01T07:10:00"],"classOfService":"L","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-12-02T00:00:00","price":{"amount":1449.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-02T07:10:00"],"classOfService":"B","hasMacFlight":False},{"departureStation":"IEV","arrivalStation":"BUD","departureDate":"2017-12-03T00:00:00","price":{"amount":2039.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-03T07:10:00"],"classOfService":"K","hasMacFlight":False}],"returnFlights":[{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-11-27T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-27T08:20:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-11-29T00:00:00","price":{"amount":1749.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-11-29T08:20:00"],"classOfService":"L","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-01T00:00:00","price":{"amount":999.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-01T08:20:00"],"classOfService":"OP","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-02T00:00:00","price":{"amount":1749.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-02T08:20:00"],"classOfService":"L","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-03T00:00:00","price":{"amount":1599.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-03T08:20:00"],"classOfService":"LB","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-04T00:00:00","price":{"amount":2039.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-04T08:20:00"],"classOfService":"K","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-06T00:00:00","price":{"amount":2619.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-06T08:20:00"],"classOfService":"J","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-07T00:00:00","price":{"amount":1599.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-07T08:20:00"],"classOfService":"LB","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-08T00:00:00","price":{"amount":799.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-08T08:20:00"],"classOfService":"PR","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-09T00:00:00","price":{"amount":1149.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-09T08:20:00"],"classOfService":"O","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-10T00:00:00","price":{"amount":1749.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-10T08:20:00"],"classOfService":"L","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-11T00:00:00","price":{"amount":1599.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-11T08:20:00"],"classOfService":"LB","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-12T00:00:00","price":{"amount":1449.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-12T08:20:00"],"classOfService":"B","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-13T00:00:00","price":{"amount":1149.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-13T08:20:00"],"classOfService":"O","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-15T00:00:00","price":{"amount":1149.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-15T08:20:00"],"classOfService":"O","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-16T00:00:00","price":{"amount":1149.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-16T08:20:00"],"classOfService":"O","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-17T00:00:00","price":{"amount":2039.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-17T08:20:00"],"classOfService":"K","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-18T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-18T08:20:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-19T00:00:00","price":{"amount":1599.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-19T08:20:00"],"classOfService":"LB","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-20T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-20T08:20:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-21T00:00:00","price":{"amount":2039.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-21T08:20:00"],"classOfService":"K","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-22T00:00:00","price":{"amount":1749.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-22T08:20:00"],"classOfService":"L","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-23T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-23T08:20:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-24T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-24T08:20:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-26T00:00:00","price":{"amount":2319.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-26T08:20:00"],"classOfService":"JK","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-27T00:00:00","price":{"amount":2619.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-27T08:20:00"],"classOfService":"J","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-28T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-28T08:20:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-29T00:00:00","price":{"amount":1889.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-29T08:20:00"],"classOfService":"KL","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-30T00:00:00","price":{"amount":1749.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-30T08:20:00"],"classOfService":"L","hasMacFlight":False},{"departureStation":"BUD","arrivalStation":"IEV","departureDate":"2017-12-31T00:00:00","price":{"amount":1599.00,"currencyCode":"UAH"},"priceType":"price","departureDates":["2017-12-31T08:20:00"],"classOfService":"LB","hasMacFlight":False}]}

# dict1 = json.dumps(dict)
# dict2 = json.loads(dict1)
# print(type(dict1))
# print(type(dict2))


req = requests.get('https://openexchangerates.org/api/latest.json?app_id=6cdf29a6391b479cb9d0a4fe9608fa04')
currency_json = json.loads(req.content)

print(currency_json)

# UAH_price = '100.5'
# print(type(UAH_price))
#
# currency = 'UAH'
#
# USD_Price = float(UAH_price)/currency_json['rates'][currency]
#
# print(USD_Price)
# print(type(USD_Price))
# print(dict2['rates']['UAH'])


# for j in dict['outboundFlights']:
# airport = Airport.objects.get(iata_code=j['arrivalStation'])
# print(type(airport))

    # new_date = datetime.strptime(date, '%Y-%m-%d')[0:6]
    # print(j['departureStation'] + '\n' + j['arrivalStation'] + '\n' + date_1 + '\n' + str(j['price']['amount']) + '\n' + j['price']['currencyCode'] + '\n')

# for j in dict['returnFlights']:
#     print(j['departureStation'] + '\n' + j['arrivalStation'] + '\n' + j['departureDate'] + '\n' + str(j['price']['amount']) + '\n' + j['price']['currencyCode'] + '\n')
    # print(j['departureStation'])

   # for i in j:
   #      for x in i:
   #          print(x)
#
# print(dict['outboundFlights'])
# print(dict['returnFlights'])